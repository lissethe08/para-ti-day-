<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Para ti ❤️</title>

<style>
  body {
    margin: 0;
    height: 100vh;
    background: #05050a;
    overflow: hidden;
    font-family: "Poppins", sans-serif;
    color: white;
  }

  /* ⭐ Fondo de estrellas */
  .stars {
    position: fixed;
    width: 100%;
    height: 100%;
    background: url("https://raw.githubusercontent.com/itsron717/starfield/master/stars.png");
    background-size: cover;
    opacity: 0.6;
    pointer-events: none;
  }

  /* Pantalla inicial */
  #intro {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 20px;
    background: rgba(0,0,0,0.7);
    backdrop-filter: blur(3px);
    transition: opacity 0.8s ease;
  }

  #intro h1 {
    font-size: 32px;
    font-weight: 600;
    text-align: center;
  }

  #intro button {
    background: #ff79c6;
    color: white;
    border: 0;
    padding: 12px 24px;
    font-size: 18px;
    border-radius: 10px;
    cursor: pointer;
    transition: 0.3s;
  }

  #intro button:hover {
    background: #ff92d4;
  }

  /* Canvas oculto hasta que se abra */
  #flowersCanvas {
    width: 100%;
    height: 100%;
    display: none;
  }
</style>
</head>
<body>

<div class="stars"></div>

<!-- Pantalla inicial -->
<div id="intro">
  <h1>Tengo algo para ti</h1>
  <button onclick="startFlowers()">Abrir</button>
</div>

<!-- Lienzo de flores -->
<canvas id="flowersCanvas"></canvas>

<script>
/* Mostrar animación al presionar "Abrir" */
function startFlowers() {
  document.getElementById("intro").style.opacity = 0;
  setTimeout(() => {
    document.getElementById("intro").style.display = "none";
    document.getElementById("flowersCanvas").style.display = "block";
    startAnimation();
  }, 800);
}

/* ------------------ ANIMACIÓN DE FLORES ------------------ */

function startAnimation() {
  const canvas = document.getElementById("flowersCanvas");
  const ctx = canvas.getContext("2d", { alpha: true });

  let DPR = Math.max(1, window.devicePixelRatio || 1);

  function resize() {
    const w = window.innerWidth;
    const h = window.innerHeight;
    canvas.width = w * DPR;
    canvas.height = h * DPR;
    ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
  }
  resize();
  window.addEventListener("resize", resize);

  const palettes = [
    ['#ffd36b','#ff7ab6','#ffb3e6','#9be7ff','#ffe7a6'],
    ['#9be7ff','#74f59a','#ffd36b','#ff9b9b','#bda4ff'],
    ['#ff9b9b','#ffd36b','#ff7ab6','#ffd8b6','#c8ffea']
  ];

  let currentPalette = palettes[0];

  class Flower {
    constructor(w, h) {
      this.reset(w, h);
    }
    reset(w, h) {
      this.w = w; this.h = h;
      this.x = Math.random() * w;
      this.y = h + Math.random() * 100;
      this.speed = 0.4 + Math.random() * 0.9;
      this.size = 4 + Math.random() * 10;
      this.phase = Math.random() * Math.PI * 2;
      this.color = currentPalette[Math.floor(Math.random() * currentPalette.length)];
    }
    update() {
      this.phase += 0.02;
      this.y -= this.speed;
      this.x += Math.sin(this.phase) * 0.3;

      if (this.y < -50) this.reset(this.w, this.h);
    }
    draw(ctx) {
      ctx.save();
      ctx.translate(this.x, this.y);
      for (let i = 0; i < 6; i++) {
        ctx.rotate(Math.PI / 3);
        ctx.beginPath();
        ctx.ellipse(0, this.size, this.size*0.4, this.size*1.1, 0, 0, Math.PI*2);
        ctx.fillStyle = this.color;
        ctx.fill();
      }
      ctx.beginPath();
      ctx.arc(0, 0, this.size * 0.45, 0, Math.PI * 2);
      ctx.fillStyle = "#fff";
      ctx.fill();
      ctx.restore();
    }
  }

  const flowers = [];
  for (let i = 0; i < 150; i++) flowers.push(new Flower(canvas.width, canvas.height));

  function loop() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    flowers.forEach(f => { f.update(); f.draw(ctx); });
    requestAnimationFrame(loop);
  }
  loop();
}

</script>
</body>
</html>
